import{c as S,r as n,j as t,a as _,H as C}from"./app-B9TfVpbd.js";import{A as E}from"./app-layout-CWIYPVX8.js";/* empty css            */import"./app-logo-icon-DjnoiMgc.js";import"./index-YdqWiZjS.js";import"./index-3T_2btGc.js";import"./index-CiEIW7uy.js";const A=[{title:"Wallet",href:"/wallet"}],W=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function z(){const e=S.c(18),[s,w]=n.useState(null);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[0]=c):c=e[0];const[i,k]=n.useState(c),[j,N]=n.useState(!0),[m,v]=n.useState(null);let x,b;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{const r=new AbortController;return N(!0),v(null),_.get("/api/wallet",{signal:r.signal}).then(o=>{w(o.data.balance??0),k(o.data.transactions??[]),N(!1)}).catch(o=>{_.isCancel(o)||(console.error("Error fetching wallet:",o),v("Unable to load wallet right now."),N(!1))}),()=>r.abort()},b=[],e[1]=x,e[2]=b):(x=e[1],b=e[2]),n.useEffect(x,b);const y=R;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(C,{title:"Wallet"}),e[3]=u):u=e[3];let f,p;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx("h1",{className:"text-lg font-semibold",children:"Cashback wallet"}),p=t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Track your cashback earnings and usage."}),e[4]=f,e[5]=p):(f=e[4],p=e[5]);let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx("div",{className:"text-xs uppercase text-muted-foreground",children:"Current balance"}),e[6]=h):h=e[6];let a;e[7]!==s?(a=s!==null?y(s):"â€”",e[7]=s,e[8]=a):a=e[8];let l;e[9]!==a?(l=t.jsxs("div",{className:"mt-4 rounded-lg border border-sidebar-border/60 bg-muted/30 p-4 text-sm dark:border-sidebar-border",children:[h,t.jsx("div",{className:"mt-1 text-2xl font-semibold",children:a})]}),e[9]=a,e[10]=l):l=e[10];let d;e[11]!==m||e[12]!==j||e[13]!==i?(d=m?t.jsx("div",{className:"mt-4 text-sm text-red-600 dark:text-red-400",children:m}):t.jsxs("div",{className:"mt-4",children:[t.jsx("h2",{className:"text-sm font-semibold",children:"Recent activity"}),t.jsx("div",{className:"mt-3 space-y-3",children:j?Array.from({length:3}).map(L):i.length?i.map(r=>t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-sidebar-border/70 p-4 text-sm dark:border-sidebar-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold capitalize",children:r.type}),t.jsx("p",{className:"text-xs text-muted-foreground",children:r.description??"Wallet update"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(r.created_at).toLocaleString()})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`text-sm font-semibold ${r.type==="debit"?"text-red-600 dark:text-red-300":"text-emerald-600 dark:text-emerald-300"}`,children:[r.type==="debit"?"-":"+",y(r.amount)]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Balance: ",y(r.balance_after)]})]})]},r.id)):t.jsx("div",{className:"rounded-lg border border-dashed border-sidebar-border/60 p-6 text-sm text-muted-foreground dark:border-sidebar-border",children:"No wallet transactions yet."})})]}),e[11]=m,e[12]=j,e[13]=i,e[14]=d):d=e[14];let g;return e[15]!==l||e[16]!==d?(g=t.jsxs(E,{breadcrumbs:A,children:[u,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-6 dark:border-sidebar-border",children:[f,p,l,d]})})]}),e[15]=l,e[16]=d,e[17]=g):g=e[17],g}function L(e,s){return t.jsxs("div",{className:"rounded-lg border border-sidebar-border/70 p-4 dark:border-sidebar-border",children:[t.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"mt-2 h-4 w-1/3 animate-pulse rounded bg-muted"})]},`wallet-skeleton-${s}`)}function R(e){return W.format(e)}export{z as default};
