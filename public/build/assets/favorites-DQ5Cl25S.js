import{c as S,r as g,j as r,a as N,H as E}from"./app-B9TfVpbd.js";import{A as F}from"./app-layout-CWIYPVX8.js";/* empty css            */import"./app-logo-icon-DjnoiMgc.js";import"./index-YdqWiZjS.js";import"./index-3T_2btGc.js";import"./index-CiEIW7uy.js";const U=[{title:"Favorites",href:"/favorites"}],A=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function B(){const e=S.c(19);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[s,y]=g.useState(l),[o,v]=g.useState(!0),[m,p]=g.useState(null);let c,b;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{const t=new AbortController;return v(!0),p(null),N.get("/api/favorites",{signal:t.signal}).then(a=>{y(a.data.favorites??[]),v(!1)}).catch(a=>{N.isCancel(a)||(console.error("Error fetching favorites:",a),p("Unable to load favorites right now."),v(!1))}),()=>t.abort()},b=[],e[1]=c,e[2]=b):(c=e[1],b=e[2]),g.useEffect(c,b);const _=R;let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=async t=>{try{await N.delete(`/api/favorites/${t}`),y(a=>a.filter(k=>k.id!==t))}catch(a){console.error("Failed to remove favorite:",a),p("Unable to remove favorite right now.")}},e[3]=x):x=e[3];const w=x;let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(E,{title:"Favorites"}),e[4]=f):f=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("h1",{className:"text-lg font-semibold",children:"Favorite products"}),e[5]=u):u=e[5];const j=s.length?`${s.length} items saved`:"Save items you love.";let d;e[6]!==j?(d=r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[u,r.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:j})]})}),e[6]=j,e[7]=d):d=e[7];let i;e[8]!==m||e[9]!==s||e[10]!==o?(i=m?r.jsx("div",{className:"mt-4 text-sm text-red-600 dark:text-red-400",children:m}):r.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:o?Array.from({length:6}).map(C):s.map(t=>r.jsxs("div",{className:"flex h-full flex-col rounded-xl border border-sidebar-border/70 bg-background p-4 shadow-sm dark:border-sidebar-border",children:[r.jsx("div",{className:"relative h-36 overflow-hidden rounded-lg border border-sidebar-border/50 bg-muted/40 dark:border-sidebar-border",children:t.image?r.jsx("img",{src:t.image,alt:t.name,className:"h-full w-full object-cover",loading:"lazy"}):r.jsx("div",{className:"flex h-full items-center justify-center text-xs text-muted-foreground",children:"No image"})}),r.jsxs("div",{className:"mt-4 flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:t.category??"Unassigned"}),r.jsx("h3",{className:"text-lg font-semibold",children:t.name})]}),t.promo_active&&r.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-1 text-xs font-semibold text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:t.promo_label??"Promo"})]}),r.jsx("p",{className:"mt-3 max-h-10 overflow-hidden text-sm text-muted-foreground",children:t.description??"No description provided."}),r.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-lg font-semibold",children:_(t.final_price)}),t.cashback_percent>0&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earn ",_(t.cashback_amount)," cashback"]})]}),r.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-2 text-xs font-semibold dark:border-sidebar-border",onClick:()=>w(t.id),type:"button",children:"Remove"})]})]},t.id))}),e[8]=m,e[9]=s,e[10]=o,e[11]=i):i=e[11];let n;e[12]!==s.length||e[13]!==o?(n=!o&&s.length===0?r.jsx("div",{className:"mt-4 rounded-lg border border-dashed border-sidebar-border/60 p-6 text-sm text-muted-foreground dark:border-sidebar-border",children:"No favorites yet."}):null,e[12]=s.length,e[13]=o,e[14]=n):n=e[14];let h;return e[15]!==d||e[16]!==i||e[17]!==n?(h=r.jsxs(F,{breadcrumbs:U,children:[f,r.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:r.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-6 dark:border-sidebar-border",children:[d,i,n]})})]}),e[15]=d,e[16]=i,e[17]=n,e[18]=h):h=e[18],h}function C(e,l){return r.jsxs("div",{className:"space-y-3 rounded-xl border border-sidebar-border/70 p-4 dark:border-sidebar-border",children:[r.jsx("div",{className:"h-36 w-full animate-pulse rounded-lg bg-muted"}),r.jsx("div",{className:"h-4 w-2/3 animate-pulse rounded bg-muted"}),r.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),r.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-muted"})]},`skeleton-${l}`)}function R(e){return A.format(e)}export{B as default};
