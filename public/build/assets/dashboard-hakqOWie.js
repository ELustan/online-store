import{c as qr,r as o,j as t,a as x,H as Hr}from"./app-kB-SxTws.js";import{A as Lr,S as Or,a as Ur,b as Br,c as zr,d as Wr}from"./app-layout-BmmVA_F-.js";import{d as Yr}from"./index-CiEIW7uy.js";import{D as Gr,a as Jr,b as Kr,c as Qr,d as Vr}from"./dialog-BerbFyO0.js";/* empty css            */import"./app-logo-icon-BGzXQtPx.js";import"./index-w2TLMKd1.js";import"./index-BniqpyP4.js";const Xr=[{title:"Dashboard",href:Yr().url}],Zr=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function Ss(){const e=qr.c(261);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0];const[m,Cr]=o.useState(i),[Le,Yt]=o.useState(!0),[Be,hr]=o.useState(null),[f,Gt]=o.useState(1),[A]=o.useState(10),[p,Tr]=o.useState(1),[$,Pr]=o.useState(0);let ze;e[1]===Symbol.for("react.memo_cache_sentinel")?(ze={from:null,to:null},e[1]=ze):ze=e[1];const[R,$r]=o.useState(ze);let We;e[2]===Symbol.for("react.memo_cache_sentinel")?(We={},e[2]=We):We=e[2];const[c,Ye]=o.useState(We);let Ge;e[3]===Symbol.for("react.memo_cache_sentinel")?(Ge={productId:null,status:"idle"},e[3]=Ge):Ge=e[3];const[b,Je]=o.useState(Ge);let Ke;e[4]===Symbol.for("react.memo_cache_sentinel")?(Ke=new Set,e[4]=Ke):Ke=e[4];const[M,Jt]=o.useState(Ke),[Kt,pr]=o.useState(null),[E,gr]=o.useState(null),I=o.useRef(null);let Qe;e[5]===Symbol.for("react.memo_cache_sentinel")?(Qe={},e[5]=Qe):Qe=e[5];const[Qt,Er]=o.useState(Qe),[y,yr]=o.useState(null),[Vt,jr]=o.useState(null),[Ve,vr]=o.useState(!1),Oe=o.useRef(null);let Xe;e[6]===Symbol.for("react.memo_cache_sentinel")?(Xe={search:"",category:"",min_price:"",max_price:""},e[6]=Xe):Xe=e[6];const[s,Ue]=o.useState(Xe),[j,Nr]=o.useState(null),[h,kr]=o.useState("stripe");let Ze;e[7]!==f||e[8]!==s.category||e[9]!==s.max_price||e[10]!==s.min_price||e[11]!==s.search||e[12]!==A?(Ze=()=>{const a=new AbortController;return Yt(!0),hr(null),x.get("/api/products",{signal:a.signal,params:{page:f,per_page:A,...s.search?{search:s.search}:{},...s.category?{category:s.category}:{},...s.min_price?{min_price:s.min_price}:{},...s.max_price?{max_price:s.max_price}:{}}}).then(l=>{const d=l.data.products;Cr(d.data),Tr(d.last_page),Pr(d.total),$r({from:d.from,to:d.to}),Yt(!1)}).catch(l=>{x.isCancel(l)||(console.error("Error fetching data:",l),hr("Unable to load products right now."),Yt(!1))}),()=>a.abort()},e[7]=f,e[8]=s.category,e[9]=s.max_price,e[10]=s.min_price,e[11]=s.search,e[12]=A,e[13]=Ze):Ze=e[13];let et;e[14]!==f||e[15]!==s||e[16]!==A?(et=[f,A,s],e[14]=f,e[15]=s,e[16]=A,e[17]=et):et=e[17],o.useEffect(Ze,et);let tt,rt;e[18]===Symbol.for("react.memo_cache_sentinel")?(rt=()=>{const a=new AbortController;return x.get("/api/favorites",{signal:a.signal}).then(l=>{const d=(l.data.favorites??[]).map(ps);Jt(new Set(d))}).catch(hs),()=>a.abort()},tt=[],e[18]=tt,e[19]=rt):(tt=e[18],rt=e[19]),o.useEffect(rt,tt);let st,at;e[20]===Symbol.for("react.memo_cache_sentinel")?(st=()=>{const a=new AbortController;return x.get("/api/cart",{signal:a.signal}).then(l=>{Ye(l.data.items??{}),vr(!0)}).catch(l=>{x.isCancel(l)||(console.error("Error fetching cart:",l),vr(!0))}),()=>a.abort()},at=[],e[20]=st,e[21]=at):(st=e[20],at=e[21]),o.useEffect(st,at);let lt,ot;e[22]===Symbol.for("react.memo_cache_sentinel")?(lt=()=>{const a=new AbortController;return x.get("/api/wallet",{signal:a.signal}).then(l=>{Nr(l.data.balance??0)}).catch(xs),()=>a.abort()},ot=[],e[22]=lt,e[23]=ot):(lt=e[22],ot=e[23]),o.useEffect(lt,ot);let nt,dt;e[24]===Symbol.for("react.memo_cache_sentinel")?(nt=()=>()=>{I.current&&clearTimeout(I.current)},dt=[],e[24]=nt,e[25]=dt):(nt=e[24],dt=e[25]),o.useEffect(nt,dt);let it,ct;e[26]!==c||e[27]!==Ve?(it=()=>{if(Ve)return Oe.current&&clearTimeout(Oe.current),Oe.current=setTimeout(()=>{const a=Object.entries(c).map(fs);x.post("/api/cart",{items:a}).catch(us)},400),()=>{Oe.current&&clearTimeout(Oe.current)}},ct=[c,Ve],e[26]=c,e[27]=Ve,e[28]=it,e[29]=ct):(it=e[28],ct=e[29]),o.useEffect(it,ct);let mt;e[30]===Symbol.for("react.memo_cache_sentinel")?(mt=()=>{Gt(1)},e[30]=mt):mt=e[30];let bt;e[31]!==s?(bt=[s],e[31]=s,e[32]=bt):bt=e[32],o.useEffect(mt,bt);const g=bs,Dr=ms;let ut;e[33]===Symbol.for("react.memo_cache_sentinel")?(ut=a=>{Ye(l=>({...l,[a]:(l[a]??0)+1}))},e[33]=ut):ut=e[33];const _r=ut;let ft;e[34]===Symbol.for("react.memo_cache_sentinel")?(ft=a=>{Ye(l=>{const d={...l};return d[a]?d[a]===1?(delete d[a],d):(d[a]=d[a]-1,d):d})},e[34]=ft):ft=e[34];const Fr=ft;let xt;e[35]!==c||e[36]!==h?(xt=async()=>{const a=Object.entries(c).map(cs);if(a.length===0){Je({productId:null,status:"error",message:"Your cart is empty."});return}Je({productId:null,status:"loading"});try{const l=await x.post("/api/checkout",{items:a,payment_method:h});if(l.data.checkout_url){window.location.href=l.data.checkout_url;return}Je({productId:null,status:"success",message:`Payment session ${l.data.payment_reference} created.`}),Ye({}),await x.delete("/api/cart"),typeof l.data.wallet_balance=="number"&&Nr(l.data.wallet_balance)}catch(l){const d=l;console.error("Checkout failed:",d),Je({productId:null,status:"error",message:d?.response?.data?.message??"Payment setup failed. Try again."})}},e[35]=c,e[36]=h,e[37]=xt):xt=e[37];const Xt=xt;let q,D,u,H,L,O,v,U,B,z,W,N,k,_,Y,G,J,w,K,S,C,T,Q,P;if(e[38]!==c||e[39]!==b.status||e[40]!==f||e[41]!==Be||e[42]!==Kt||e[43]!==E||e[44]!==M||e[45]!==s.category||e[46]!==s.max_price||e[47]!==s.min_price||e[48]!==s.search||e[49]!==p||e[50]!==Le||e[51]!==h||e[52]!==m||e[53]!==R||e[54]!==Qt||e[55]!==$||e[56]!==j){const a=(r,n)=>{gr({message:r,tone:n}),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{gr(null),I.current=null},2200)};let l;e[81]===Symbol.for("react.memo_cache_sentinel")?(l=(r,n)=>{const F=n.images?.find(qe=>qe.url===r);yr({url:r,caption:F?.caption??null,name:n.name})},e[81]=l):l=e[81];const d=l,Ar=async r=>{const n=new Set(M),F=n.has(r);n[F?"delete":"add"](r),Jt(n),pr(r),setTimeout(()=>pr(null),400);try{F?(await x.delete(`/api/favorites/${r}`),a("Removed from favorites.","success")):(await x.post("/api/favorites",{product_id:r}),a("Added to favorites.","success"))}catch(qe){console.error("Favorite update failed:",qe);const He=new Set(M);Jt(He),a("Unable to update favorites.","error")}};let jt;e[82]!==c?(jt=r=>c[r.id],e[82]=c,e[83]=jt):jt=e[83];let vt;e[84]!==c?(vt=r=>({...r,quantity:c[r.id],lineTotal:r.final_price*c[r.id],lineCashback:r.cashback_amount*c[r.id]}),e[84]=c,e[85]=vt):vt=e[85],u=m.filter(jt).map(vt);let Nt;if(e[86]!==m){const r=new Set;m.forEach(n=>{n.category&&r.add(n.category)}),Nt=Array.from(r).sort(),e[86]=m,e[87]=Nt}else Nt=e[87];const nr=Nt,wr=u.reduce(is,0),Rr=u.reduce(ds,0);D=j!==null&&j>=wr&&u.length>0,q=Lr,Q=Xr,e[88]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(Hr,{title:"Dashboard"}),e[88]=P):P=e[88],K="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",e[89]!==E?(S=E?t.jsx("div",{className:"pointer-events-none fixed right-6 top-6 z-50",children:t.jsx("div",{className:`rounded-lg border px-4 py-2 text-sm shadow-lg ${E.tone==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:E.message})}):null,e[89]=E,e[90]=S):S=e[90];let kt,_t;e[91]===Symbol.for("react.memo_cache_sentinel")?(kt=t.jsx("div",{className:"absolute -right-16 -top-16 h-40 w-40 rounded-full bg-emerald-200/40 blur-3xl dark:bg-emerald-400/20"}),_t=t.jsx("div",{className:"absolute -left-10 bottom-0 h-36 w-36 rounded-full bg-sky-200/30 blur-3xl dark:bg-sky-400/20"}),e[91]=kt,e[92]=_t):(kt=e[91],_t=e[92]);let wt;e[93]===Symbol.for("react.memo_cache_sentinel")?(wt=t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-muted-foreground",children:"Online Store"}),t.jsx("h1",{className:"mt-2 text-2xl font-semibold text-foreground",children:"Secure payments, instant savings"}),t.jsx("p",{className:"mt-1 max-w-xl text-sm text-muted-foreground",children:"Shop curated products with transparent pricing, active promos, and automatic cashback."})]}),e[93]=wt):wt=e[93];let St;e[94]===Symbol.for("react.memo_cache_sentinel")?(St=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Products"}),e[94]=St):St=e[94];let ge;e[95]!==$?(ge=t.jsxs("div",{className:"min-w-[140px] rounded-lg border border-sidebar-border/60 bg-background/80 px-4 py-3 shadow-sm dark:border-sidebar-border",children:[St,t.jsx("p",{className:"text-lg font-semibold",children:$})]}),e[95]=$,e[96]=ge):ge=e[96];let Ct;e[97]===Symbol.for("react.memo_cache_sentinel")?(Ct=t.jsxs("div",{className:"min-w-[140px] rounded-lg border border-sidebar-border/60 bg-background/80 px-4 py-3 shadow-sm dark:border-sidebar-border",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure checkout"}),t.jsx("p",{className:"text-lg font-semibold",children:"Enabled"})]}),e[97]=Ct):Ct=e[97];let Tt;e[98]===Symbol.for("react.memo_cache_sentinel")?(Tt=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Promos today"}),e[98]=Tt):Tt=e[98];let ye;e[99]!==m?(ye=m.filter(ns),e[99]=m,e[100]=ye):ye=e[100];let je;e[101]!==ye.length?(je=t.jsxs("div",{className:"min-w-[140px] rounded-lg border border-sidebar-border/60 bg-background/80 px-4 py-3 shadow-sm dark:border-sidebar-border",children:[Tt,t.jsx("p",{className:"text-lg font-semibold",children:ye.length})]}),e[101]=ye.length,e[102]=je):je=e[102],e[103]!==ge||e[104]!==je?(C=t.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-sidebar-border/70 bg-gradient-to-br from-muted/40 via-background to-muted/30 p-6 dark:border-sidebar-border",children:[kt,_t,t.jsxs("div",{className:"relative flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[wt,t.jsxs("div",{className:"flex flex-wrap gap-3",children:[ge,Ct,je]})]})]}),e[103]=ge,e[104]=je,e[105]=C):C=e[105];let Pt;e[106]===Symbol.for("react.memo_cache_sentinel")?(Pt=t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Filter products"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Search, category, or price range to refine the list."})]}),e[106]=Pt):Pt=e[106];let $t;e[107]===Symbol.for("react.memo_cache_sentinel")?($t=t.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[Pt,t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-1 text-xs font-semibold dark:border-sidebar-border",onClick:()=>Ue({search:"",category:"",min_price:"",max_price:""}),type:"button",children:"Clear filters"})]}),e[107]=$t):$t=e[107];let Et;e[108]===Symbol.for("react.memo_cache_sentinel")?(Et=r=>Ue(n=>({...n,search:r.target.value})),e[108]=Et):Et=e[108];let ve;e[109]!==s.search?(ve=t.jsx("input",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",placeholder:"Search products",value:s.search,onChange:Et}),e[109]=s.search,e[110]=ve):ve=e[110];const Mr=s.category;let Dt,Ft;e[111]===Symbol.for("react.memo_cache_sentinel")?(Dt=r=>Ue(n=>({...n,category:r.target.value})),Ft=t.jsx("option",{value:"",children:"All categories"}),e[111]=Dt,e[112]=Ft):(Dt=e[111],Ft=e[112]);let Ne;e[113]!==nr?(Ne=nr.map(os),e[113]=nr,e[114]=Ne):Ne=e[114];let ke;e[115]!==s.category||e[116]!==Ne?(ke=t.jsxs("select",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",value:Mr,onChange:Dt,children:[Ft,Ne]}),e[115]=s.category,e[116]=Ne,e[117]=ke):ke=e[117];let At;e[118]===Symbol.for("react.memo_cache_sentinel")?(At=r=>Ue(n=>({...n,min_price:r.target.value})),e[118]=At):At=e[118];let _e;e[119]!==s.min_price?(_e=t.jsx("input",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",placeholder:"Min price",value:s.min_price,onChange:At,type:"number",min:"0"}),e[119]=s.min_price,e[120]=_e):_e=e[120];let Rt;e[121]===Symbol.for("react.memo_cache_sentinel")?(Rt=r=>Ue(n=>({...n,max_price:r.target.value})),e[121]=Rt):Rt=e[121];let we;e[122]!==s.max_price?(we=t.jsx("input",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",placeholder:"Max price",value:s.max_price,onChange:Rt,type:"number",min:"0"}),e[122]=s.max_price,e[123]=we):we=e[123],e[124]!==ve||e[125]!==ke||e[126]!==_e||e[127]!==we?(T=t.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-4 dark:border-sidebar-border",children:[$t,t.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[ve,ke,_e,we]})]}),e[124]=ve,e[125]=ke,e[126]=_e,e[127]=we,e[128]=T):T=e[128],J="grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]";let Mt;e[129]===Symbol.for("react.memo_cache_sentinel")?(Mt=t.jsx("h2",{className:"text-lg font-semibold",children:"Products"}),e[129]=Mt):Mt=e[129];const dr=$>0&&R.from!==null&&R.to!==null?`Showing ${R.from}-${R.to} of ${$}`:"No products found";let Se;e[130]!==dr?(Se=t.jsxs("div",{children:[Mt,t.jsx("p",{className:"text-sm text-muted-foreground",children:dr})]}),e[130]=dr,e[131]=Se):Se=e[131];let It;e[132]===Symbol.for("react.memo_cache_sentinel")?(It=()=>Gt(ls),e[132]=It):It=e[132];const ir=Le||f===1;let Ce;e[133]!==ir?(Ce=t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-1 text-sm disabled:cursor-not-allowed disabled:opacity-50 dark:border-sidebar-border",onClick:It,disabled:ir,type:"button",children:"Prev"}),e[133]=ir,e[134]=Ce):Ce=e[134];let Te;e[135]!==f||e[136]!==p?(Te=t.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",f," of ",p]}),e[135]=f,e[136]=p,e[137]=Te):Te=e[137];let Pe;e[138]!==p?(Pe=()=>Gt(r=>Math.min(p,r+1)),e[138]=p,e[139]=Pe):Pe=e[139];const cr=Le||f===p;let $e;e[140]!==Pe||e[141]!==cr?($e=t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-1 text-sm disabled:cursor-not-allowed disabled:opacity-50 dark:border-sidebar-border",onClick:Pe,disabled:cr,type:"button",children:"Next"}),e[140]=Pe,e[141]=cr,e[142]=$e):$e=e[142];let Ee;e[143]!==Ce||e[144]!==Te||e[145]!==$e?(Ee=t.jsxs("div",{className:"flex items-center gap-2",children:[Ce,Te,$e]}),e[143]=Ce,e[144]=Te,e[145]=$e,e[146]=Ee):Ee=e[146];let De;e[147]!==Se||e[148]!==Ee?(De=t.jsxs("div",{className:"flex flex-col gap-3 border-b border-sidebar-border/70 px-4 py-4 md:flex-row md:items-center md:justify-between dark:border-sidebar-border",children:[Se,Ee]}),e[147]=Se,e[148]=Ee,e[149]=De):De=e[149];const mr=Be?t.jsx("div",{className:"px-4 py-6 text-sm text-red-600 dark:text-red-400",children:Be}):t.jsx("div",{className:"grid gap-4 p-4 md:grid-cols-2 xl:grid-cols-3",children:Le?Array.from({length:6}).map(as):m.map(r=>{const n=Dr(r.promo_expires_at),F=r.discount_percent>0,qe=r.cashback_percent>0,Wt=[r.image,...(r.images??[]).map(ss)].filter(rs),He=Qt[r.id]??Wt[0]??null;return t.jsxs("div",{className:"flex h-full flex-col rounded-xl border border-sidebar-border/70 bg-background p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md dark:border-sidebar-border",children:[t.jsx("div",{className:"relative h-36 overflow-hidden rounded-lg border border-sidebar-border/50 bg-muted/40 dark:border-sidebar-border",children:He?t.jsx("button",{className:"h-full w-full",onClick:()=>d(He,r),type:"button",children:t.jsx("img",{src:He,alt:r.name,className:"h-full w-full object-cover",loading:"lazy"})}):t.jsx("div",{className:"flex h-full items-center justify-center text-xs text-muted-foreground",children:"No image"})}),Wt.length>1?t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Wt.map((xr,Sr)=>t.jsx("button",{className:`h-10 w-10 overflow-hidden rounded-md border ${He===xr?"border-foreground":"border-sidebar-border/70"}`,onClick:()=>Er(Ir=>({...Ir,[r.id]:xr})),type:"button",children:t.jsx("img",{src:xr,alt:`${r.name} preview ${Sr+1}`,className:"h-full w-full object-cover",loading:"lazy"})},`${r.id}-preview-${Sr}`))}):null,t.jsxs("div",{className:"mt-4 flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:r.category??"Unassigned"}),t.jsx("h3",{className:"text-lg font-semibold",children:r.name})]}),r.promo_active&&t.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-1 text-xs font-semibold text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:r.promo_label??"Promo"})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[F&&t.jsxs("span",{className:"rounded-full border border-amber-200 bg-amber-50 px-2 py-1 text-amber-700 dark:border-amber-400/40 dark:bg-amber-500/10 dark:text-amber-200",children:[r.discount_percent,"% off"]}),qe&&t.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-2 py-1 text-sky-700 dark:border-sky-400/40 dark:bg-sky-500/10 dark:text-sky-200",children:[r.cashback_percent,"% cashback"]}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.rating_average!==null&&r.rating_average!==void 0?`${r.rating_average.toFixed(1)} / 5`:"No ratings",r.reviews_count?` (${r.reviews_count})`:""]}),n&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ends ",n]})]}),t.jsx("div",{className:"mt-3 max-h-12 overflow-hidden text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:r.description??"<p>No description provided.</p>"}}),r.description?t.jsx("button",{className:"mt-2 text-xs font-semibold text-foreground/70",onClick:()=>jr({name:r.name,description:r.description??""}),type:"button",children:"Read full description"}):null,t.jsxs("div",{className:"mt-4 flex items-end justify-between",children:[t.jsxs("div",{children:[F?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg font-semibold",children:g(r.final_price)}),t.jsx("span",{className:"text-xs text-muted-foreground line-through",children:g(r.price)})]}):t.jsx("span",{className:"text-lg font-semibold",children:g(r.price)}),qe&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earn ",g(r.cashback_amount)," cashback"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:`rounded-md border px-2 py-2 text-xs font-semibold transition duration-200 dark:border-sidebar-border ${M.has(r.id)?"border-amber-300 bg-amber-50 text-amber-700":"border-sidebar-border/70 text-muted-foreground"} ${Kt===r.id?"scale-110 rotate-12 shadow-md":"scale-100"}`,onClick:()=>Ar(r.id),type:"button",children:M.has(r.id)?"★":"☆"}),t.jsx("button",{className:"rounded-md bg-foreground px-3 py-2 text-xs font-semibold text-background transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>_r(r.id),disabled:b.status==="loading",type:"button",children:"Add to cart"})]})]}),r.reviews?.length?t.jsxs("div",{className:"mt-4 rounded-lg border border-sidebar-border/60 bg-muted/30 p-3 text-xs text-muted-foreground dark:border-sidebar-border",children:[t.jsx("div",{className:"text-xs font-semibold uppercase text-muted-foreground",children:"Recent reviews"}),t.jsx("div",{className:"mt-2 space-y-2",children:r.reviews.map(ts)})]}):null]},r.id)})});e[150]!==De||e[151]!==mr?(w=t.jsxs("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[De,mr]}),e[150]=De,e[151]=mr,e[152]=w):w=e[152],Y="lg:sticky lg:top-6 lg:self-start";let qt;e[153]===Symbol.for("react.memo_cache_sentinel")?(qt=t.jsx("h2",{className:"text-lg font-semibold",children:"Shopping list"}),e[153]=qt):qt=e[153];const br=u.length?"Items ready for checkout":"Your cart is empty";let Ht;e[154]!==br?(Ht=t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[qt,t.jsx("p",{className:"text-sm text-muted-foreground",children:br})]})}),e[154]=br,e[155]=Ht):Ht=e[155],G=t.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-4 dark:border-sidebar-border",children:[Ht,t.jsx("div",{className:"mt-4 space-y-3",children:u.length?u.map(r=>t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-sidebar-border/60 p-3 dark:border-sidebar-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold",children:r.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[g(r.final_price)," each"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-2 py-1 text-xs dark:border-sidebar-border",onClick:()=>Fr(r.id),type:"button",children:"-"}),t.jsx("span",{className:"text-sm font-semibold",children:r.quantity}),t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-2 py-1 text-xs dark:border-sidebar-border",onClick:()=>_r(r.id),type:"button",children:"+"})]}),t.jsx("div",{className:"text-sm font-semibold",children:g(r.lineTotal)})]},`cart-${r.id}`)):t.jsx("div",{className:"rounded-lg border border-dashed border-sidebar-border/60 p-6 text-sm text-muted-foreground dark:border-sidebar-border",children:"Add products to build your shopping list."})})]}),W="mt-4 rounded-xl border border-sidebar-border/70 bg-background p-4 dark:border-sidebar-border",e[156]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("h2",{className:"text-lg font-semibold",children:"Checkout"}),k=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Review totals before paying."}),e[156]=N,e[157]=k):(N=e[156],k=e[157]);let Lt;e[158]===Symbol.for("react.memo_cache_sentinel")?(Lt=t.jsx("span",{children:"Cashback wallet"}),e[158]=Lt):Lt=e[158];let Fe;e[159]!==j?(Fe=j!==null?g(j):"—",e[159]=j,e[160]=Fe):Fe=e[160];let Ae;e[161]!==Fe?(Ae=t.jsxs("div",{className:"flex items-center justify-between",children:[Lt,t.jsx("span",{className:"font-semibold text-foreground",children:Fe})]}),e[161]=Fe,e[162]=Ae):Ae=e[162];const ur=`rounded-md border px-2 py-1 text-xs font-semibold ${h==="stripe"?"border-foreground bg-foreground text-background":"border-sidebar-border/70 text-muted-foreground"}`;let Ot;e[163]===Symbol.for("react.memo_cache_sentinel")?(Ot=()=>kr("stripe"),e[163]=Ot):Ot=e[163];let Re;e[164]!==ur?(Re=t.jsx("button",{className:ur,onClick:Ot,type:"button",children:"Pay by card"}),e[164]=ur,e[165]=Re):Re=e[165];const fr=`rounded-md border px-2 py-1 text-xs font-semibold ${h==="wallet"?"border-foreground bg-foreground text-background":"border-sidebar-border/70 text-muted-foreground"}`;let Ut;e[166]===Symbol.for("react.memo_cache_sentinel")?(Ut=()=>kr("wallet"),e[166]=Ut):Ut=e[166];let Me;e[167]!==fr?(Me=t.jsx("button",{className:fr,onClick:Ut,type:"button",children:"Use cashback"}),e[167]=fr,e[168]=Me):Me=e[168];let Ie;e[169]!==Re||e[170]!==Me?(Ie=t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[Re,Me]}),e[169]=Re,e[170]=Me,e[171]=Ie):Ie=e[171],e[172]!==Ae||e[173]!==Ie?(_=t.jsxs("div",{className:"mt-3 rounded-lg border border-sidebar-border/60 bg-muted/30 p-3 text-xs text-muted-foreground dark:border-sidebar-border",children:[Ae,Ie]}),e[172]=Ae,e[173]=Ie,e[174]=_):_=e[174],U="mt-4 space-y-3 text-sm";let Bt;e[175]===Symbol.for("react.memo_cache_sentinel")?(Bt=t.jsx("span",{className:"text-muted-foreground",children:"Items"}),e[175]=Bt):Bt=e[175],B=t.jsxs("div",{className:"flex items-center justify-between",children:[Bt,t.jsx("span",{children:u.reduce(es,0)})]});let zt;e[176]===Symbol.for("react.memo_cache_sentinel")?(zt=t.jsx("span",{className:"text-muted-foreground",children:"Total"}),e[176]=zt):zt=e[176],z=t.jsxs("div",{className:"flex items-center justify-between",children:[zt,t.jsx("span",{className:"font-semibold",children:g(wr)})]}),O="flex items-center justify-between",e[177]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("span",{className:"text-muted-foreground",children:"Cashback"}),e[177]=v):v=e[177],H="font-semibold text-emerald-600 dark:text-emerald-300",L=g(Rr),e[38]=c,e[39]=b.status,e[40]=f,e[41]=Be,e[42]=Kt,e[43]=E,e[44]=M,e[45]=s.category,e[46]=s.max_price,e[47]=s.min_price,e[48]=s.search,e[49]=p,e[50]=Le,e[51]=h,e[52]=m,e[53]=R,e[54]=Qt,e[55]=$,e[56]=j,e[57]=q,e[58]=D,e[59]=u,e[60]=H,e[61]=L,e[62]=O,e[63]=v,e[64]=U,e[65]=B,e[66]=z,e[67]=W,e[68]=N,e[69]=k,e[70]=_,e[71]=Y,e[72]=G,e[73]=J,e[74]=w,e[75]=K,e[76]=S,e[77]=C,e[78]=T,e[79]=Q,e[80]=P}else q=e[57],D=e[58],u=e[59],H=e[60],L=e[61],O=e[62],v=e[63],U=e[64],B=e[65],z=e[66],W=e[67],N=e[68],k=e[69],_=e[70],Y=e[71],G=e[72],J=e[73],w=e[74],K=e[75],S=e[76],C=e[77],T=e[78],Q=e[79],P=e[80];let V;e[178]!==H||e[179]!==L?(V=t.jsx("span",{className:H,children:L}),e[178]=H,e[179]=L,e[180]=V):V=e[180];let X;e[181]!==O||e[182]!==v||e[183]!==V?(X=t.jsxs("div",{className:O,children:[v,V]}),e[181]=O,e[182]=v,e[183]=V,e[184]=X):X=e[184];let Z;e[185]!==U||e[186]!==B||e[187]!==z||e[188]!==X?(Z=t.jsxs("div",{className:U,children:[B,z,X]}),e[185]=U,e[186]=B,e[187]=z,e[188]=X,e[189]=Z):Z=e[189];const Zt=b.status==="loading"||u.length===0||h==="wallet"&&!D,er=b.status==="loading"?"Processing...":h==="wallet"?"Pay with cashback":"Checkout with card";let ee;e[190]!==Xt||e[191]!==Zt||e[192]!==er?(ee=t.jsx("button",{className:"mt-4 w-full rounded-md bg-foreground px-3 py-2 text-sm font-semibold text-background transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",onClick:Xt,disabled:Zt,type:"button",children:er}),e[190]=Xt,e[191]=Zt,e[192]=er,e[193]=ee):ee=e[193];let te;e[194]!==D||e[195]!==u||e[196]!==h?(te=h==="wallet"&&!D&&u.length>0?t.jsx("p",{className:"mt-2 text-xs text-amber-600 dark:text-amber-300",children:"Cashback balance is insufficient for this order."}):null,e[194]=D,e[195]=u,e[196]=h,e[197]=te):te=e[197];let re;e[198]!==b.message||e[199]!==b.status?(re=b.status!=="idle"&&b.message?t.jsx("p",{className:`mt-3 text-xs ${b.status==="success"?"text-emerald-600 dark:text-emerald-300":b.status==="error"?"text-red-600 dark:text-red-300":"text-muted-foreground"}`,children:b.message}):null,e[198]=b.message,e[199]=b.status,e[200]=re):re=e[200];let se;e[201]!==W||e[202]!==N||e[203]!==k||e[204]!==_||e[205]!==Z||e[206]!==ee||e[207]!==te||e[208]!==re?(se=t.jsxs("div",{className:W,children:[N,k,_,Z,ee,te,re]}),e[201]=W,e[202]=N,e[203]=k,e[204]=_,e[205]=Z,e[206]=ee,e[207]=te,e[208]=re,e[209]=se):se=e[209];let ae;e[210]!==Y||e[211]!==G||e[212]!==se?(ae=t.jsxs("div",{className:Y,children:[G,se]}),e[210]=Y,e[211]=G,e[212]=se,e[213]=ae):ae=e[213];let le;e[214]!==J||e[215]!==w||e[216]!==ae?(le=t.jsxs("div",{className:J,children:[w,ae]}),e[214]=J,e[215]=w,e[216]=ae,e[217]=le):le=e[217];let oe;e[218]!==K||e[219]!==S||e[220]!==C||e[221]!==T||e[222]!==le?(oe=t.jsxs("div",{className:K,children:[S,C,T,le]}),e[218]=K,e[219]=S,e[220]=C,e[221]=T,e[222]=le,e[223]=oe):oe=e[223];const tr=!!y;let ht;e[224]===Symbol.for("react.memo_cache_sentinel")?(ht=a=>a?null:yr(null),e[224]=ht):ht=e[224];const rr=y?.name??"Product image";let ne;e[225]!==rr?(ne=t.jsx(Gr,{children:rr}),e[225]=rr,e[226]=ne):ne=e[226];const sr=y?.caption??"Preview image";let de;e[227]!==sr?(de=t.jsx(Jr,{children:sr}),e[227]=sr,e[228]=de):de=e[228];let ie;e[229]!==ne||e[230]!==de?(ie=t.jsxs(Kr,{children:[ne,de]}),e[229]=ne,e[230]=de,e[231]=ie):ie=e[231];let ce;e[232]!==y?(ce=y?.url?t.jsx("div",{className:"overflow-hidden rounded-lg border border-sidebar-border/70",children:t.jsx("img",{src:y.url,alt:y.name,className:"h-full w-full object-contain"})}):null,e[232]=y,e[233]=ce):ce=e[233];let me;e[234]!==ie||e[235]!==ce?(me=t.jsxs(Qr,{className:"max-w-3xl",children:[ie,ce]}),e[234]=ie,e[235]=ce,e[236]=me):me=e[236];let be;e[237]!==tr||e[238]!==me?(be=t.jsx(Vr,{open:tr,onOpenChange:ht,children:me}),e[237]=tr,e[238]=me,e[239]=be):be=e[239];const ar=!!Vt;let pt;e[240]===Symbol.for("react.memo_cache_sentinel")?(pt=a=>a?null:jr(null),e[240]=pt):pt=e[240];const lr=Vt?.name??"Description";let ue;e[241]!==lr?(ue=t.jsx(Or,{children:lr}),e[241]=lr,e[242]=ue):ue=e[242];let gt;e[243]===Symbol.for("react.memo_cache_sentinel")?(gt=t.jsx(Ur,{children:"Full product details"}),e[243]=gt):gt=e[243];let fe;e[244]!==ue?(fe=t.jsxs(Br,{children:[ue,gt]}),e[244]=ue,e[245]=fe):fe=e[245];const or=Vt?.description??"<p>No description provided.</p>";let xe;e[246]!==or?(xe=t.jsx("div",{className:"mt-4 flex-1 overflow-y-auto p-4 text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:or}}),e[246]=or,e[247]=xe):xe=e[247];let he;e[248]!==fe||e[249]!==xe?(he=t.jsxs(zr,{side:"right",className:"flex h-full w-full max-w-lg flex-col",children:[fe,xe]}),e[248]=fe,e[249]=xe,e[250]=he):he=e[250];let pe;e[251]!==ar||e[252]!==he?(pe=t.jsx(Wr,{open:ar,onOpenChange:pt,children:he}),e[251]=ar,e[252]=he,e[253]=pe):pe=e[253];let yt;return e[254]!==q||e[255]!==Q||e[256]!==P||e[257]!==oe||e[258]!==be||e[259]!==pe?(yt=t.jsxs(q,{breadcrumbs:Q,children:[P,oe,be,pe]}),e[254]=q,e[255]=Q,e[256]=P,e[257]=oe,e[258]=be,e[259]=pe,e[260]=yt):yt=e[260],yt}function es(e,i){return e+i.quantity}function ts(e){return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-foreground",children:e.reviewer}),t.jsx("span",{children:"★".repeat(e.rating)})]}),t.jsx("p",{className:"text-xs",children:e.comment})]},e.id)}function rs(e){return!!e}function ss(e){return e.url}function as(e,i){return t.jsxs("div",{className:"space-y-3 rounded-xl border border-sidebar-border/70 p-4 dark:border-sidebar-border",children:[t.jsx("div",{className:"h-36 w-full animate-pulse rounded-lg bg-muted"}),t.jsx("div",{className:"h-4 w-2/3 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-muted"})]},`skeleton-${i}`)}function ls(e){return Math.max(1,e-1)}function os(e){return t.jsx("option",{value:e,children:e},e)}function ns(e){return e.promo_active}function ds(e,i){return e+i.lineCashback}function is(e,i){return e+i.lineTotal}function cs(e){const[i,m]=e;return{product_id:Number(i),quantity:m}}function ms(e){if(!e)return null;const i=new Date(e);return Number.isNaN(i.getTime())?null:i.toLocaleDateString()}function bs(e){return Zr.format(e)}function us(e){console.error("Error saving cart:",e)}function fs(e){const[i,m]=e;return{product_id:Number(i),quantity:m}}function xs(e){x.isCancel(e)||console.error("Error fetching wallet:",e)}function hs(e){x.isCancel(e)||console.error("Error fetching favorites:",e)}function ps(e){return e.id}export{Ss as default};
