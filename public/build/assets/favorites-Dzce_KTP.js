import{c as ie,r as n,j as t,a as X,H as de}from"./app-BbNxNsQY.js";import{H as le,S as ce,a as me,b as fe,c as xe,d as ue,A as he}from"./app-layout-Be5m0NhR.js";import{D as be,a as ge,b as pe,c as ve,d as je}from"./dialog-CSH1WIsy.js";import{a as ye}from"./app-logo-icon-C5cjEc3_.js";/* empty css            */import"./index-DBnW4QuW.js";import"./index-ZgwXp1IE.js";import"./index-CiEIW7uy.js";const Ne=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],we=ye("Trash2",Ne),ke=[{title:"Favorites",href:"/favorites"}],Se=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function Ue(){const e=ie.c(59);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0];const[a,Y]=n.useState(i),[d,B]=n.useState(!0),[C,P]=n.useState(null);let D;e[1]===Symbol.for("react.memo_cache_sentinel")?(D={},e[1]=D):D=e[1];const[z,ae]=n.useState(D),[o,Z]=n.useState(null),[O,ee]=n.useState(null);let F,H;e[2]===Symbol.for("react.memo_cache_sentinel")?(F=()=>{const r=new AbortController;return B(!0),P(null),X.get("/api/favorites",{signal:r.signal}).then(s=>{Y(s.data.favorites??[]),B(!1)}).catch(s=>{X.isCancel(s)||(console.error("Error fetching favorites:",s),P("Unable to load favorites right now."),B(!1))}),()=>r.abort()},H=[],e[2]=F,e[3]=H):(F=e[2],H=e[3]),n.useEffect(F,H);const te=Fe;let I;e[4]===Symbol.for("react.memo_cache_sentinel")?(I=async r=>{try{await X.delete(`/api/favorites/${r}`),Y(s=>s.filter(l=>l.id!==r))}catch(s){console.error("Failed to remove favorite:",s),P("Unable to remove favorite right now.")}},e[4]=I):I=e[4];const re=I;let $;e[5]===Symbol.for("react.memo_cache_sentinel")?($=(r,s)=>{const l=s.images?.find(_=>_.url===r);Z({url:r,caption:l?.caption??null,name:s.name})},e[5]=$):$=e[5];const oe=$;let E;e[6]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(de,{title:"Favorites"}),e[6]=E):E=e[6];let M;e[7]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("h1",{className:"text-lg font-semibold",children:"Favorite products"}),e[7]=M):M=e[7];const V=a.length?`${a.length} items saved`:"Save items you love.";let c;e[8]!==V?(c=t.jsxs("div",{children:[M,t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:V})]}),e[8]=V,e[9]=c):c=e[9];let R;e[10]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsxs("div",{className:"hidden items-center gap-2 text-xs text-muted-foreground md:flex",children:[t.jsx(le,{className:"h-4 w-4 text-rose-500"}),"Keep what you like close."]}),e[10]=R):R=e[10];let m;e[11]!==c?(m=t.jsxs("div",{className:"flex items-center justify-between",children:[c,R]}),e[11]=c,e[12]=m):m=e[12];let f;e[13]!==C||e[14]!==a||e[15]!==d||e[16]!==z?(f=C?t.jsx("div",{className:"mt-4 text-sm text-red-600 dark:text-red-400",children:C}):t.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:d?Array.from({length:6}).map(De):a.map(r=>{const s=[r.image,...(r.images??[]).map(Ce)].filter(_e),l=z[r.id]??s[0]??null;return t.jsxs("div",{className:"flex h-full flex-col rounded-xl border border-sidebar-border/70 bg-background p-4 shadow-sm dark:border-sidebar-border",children:[t.jsxs("div",{className:"relative h-36 overflow-hidden rounded-lg border border-sidebar-border/50 bg-muted/40 dark:border-sidebar-border",children:[l?t.jsx("button",{className:"h-full w-full",onClick:()=>oe(l,r),type:"button",children:t.jsx("img",{src:l,alt:r.name,className:"h-full w-full object-cover",loading:"lazy"})}):t.jsx("div",{className:"flex h-full items-center justify-center text-xs text-muted-foreground",children:"No image"}),t.jsx("button",{className:"absolute right-2 top-2 rounded-full border border-rose-200 bg-white/90 p-2 text-rose-600 shadow-sm transition hover:bg-rose-50 dark:border-rose-400/40 dark:bg-rose-500/10 dark:text-rose-200",onClick:()=>re(r.id),type:"button","aria-label":"Remove from favorites",children:t.jsx(le,{className:"h-4 w-4 fill-current"})})]}),s.length>1?t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.map((_,se)=>t.jsx("button",{className:`h-10 w-10 overflow-hidden rounded-md border ${l===_?"border-foreground":"border-sidebar-border/70"}`,onClick:()=>ae(ne=>({...ne,[r.id]:_})),type:"button",children:t.jsx("img",{src:_,alt:`${r.name} preview ${se+1}`,className:"h-full w-full object-cover",loading:"lazy"})},`${r.id}-preview-${se}`))}):null,t.jsxs("div",{className:"mt-4 flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:r.category??"Unassigned"}),t.jsx("h3",{className:"text-lg font-semibold",children:r.name})]}),r.promo_active&&t.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-1 text-xs font-semibold text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:r.promo_label??"Promo"})]}),t.jsx("div",{className:"mt-3 max-h-12 overflow-hidden text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:r.description??"<p>No description provided.</p>"}}),r.description?t.jsx("button",{className:"mt-2 text-xs font-semibold text-foreground/70",onClick:()=>ee({name:r.name,description:r.description??""}),type:"button",children:"Read full description"}):null,t.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-lg font-semibold",children:te(r.final_price)}),r.cashback_percent>0&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earn ",te(r.cashback_amount)," cashback"]})]}),t.jsxs("button",{className:"inline-flex items-center gap-2 rounded-md border border-sidebar-border/70 px-3 py-2 text-xs font-semibold text-muted-foreground transition hover:text-foreground dark:border-sidebar-border",onClick:()=>re(r.id),type:"button",children:[t.jsx(we,{className:"h-4 w-4"}),"Remove"]})]})]},r.id)})}),e[13]=C,e[14]=a,e[15]=d,e[16]=z,e[17]=f):f=e[17];let x;e[18]!==a.length||e[19]!==d?(x=!d&&a.length===0?t.jsx("div",{className:"mt-4 rounded-lg border border-dashed border-sidebar-border/60 p-6 text-sm text-muted-foreground dark:border-sidebar-border",children:"No favorites yet."}):null,e[18]=a.length,e[19]=d,e[20]=x):x=e[20];let u;e[21]!==m||e[22]!==f||e[23]!==x?(u=t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-6 dark:border-sidebar-border",children:[m,f,x]})}),e[21]=m,e[22]=f,e[23]=x,e[24]=u):u=e[24];const K=!!o;let T;e[25]===Symbol.for("react.memo_cache_sentinel")?(T=r=>r?null:Z(null),e[25]=T):T=e[25];const q=o?.name??"Product image";let h;e[26]!==q?(h=t.jsx(be,{children:q}),e[26]=q,e[27]=h):h=e[27];const G=o?.caption??"Preview image";let b;e[28]!==G?(b=t.jsx(ge,{children:G}),e[28]=G,e[29]=b):b=e[29];let g;e[30]!==h||e[31]!==b?(g=t.jsxs(pe,{children:[h,b]}),e[30]=h,e[31]=b,e[32]=g):g=e[32];let p;e[33]!==o?(p=o?.url?t.jsx("div",{className:"overflow-hidden rounded-lg border border-sidebar-border/70",children:t.jsx("img",{src:o.url,alt:o.name,className:"h-full w-full object-contain"})}):null,e[33]=o,e[34]=p):p=e[34];let v;e[35]!==g||e[36]!==p?(v=t.jsxs(ve,{className:"max-w-3xl",children:[g,p]}),e[35]=g,e[36]=p,e[37]=v):v=e[37];let j;e[38]!==K||e[39]!==v?(j=t.jsx(je,{open:K,onOpenChange:T,children:v}),e[38]=K,e[39]=v,e[40]=j):j=e[40];const J=!!O;let L;e[41]===Symbol.for("react.memo_cache_sentinel")?(L=r=>r?null:ee(null),e[41]=L):L=e[41];const Q=O?.name??"Description";let y;e[42]!==Q?(y=t.jsx(ce,{children:Q}),e[42]=Q,e[43]=y):y=e[43];let U;e[44]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(me,{children:"Full product details"}),e[44]=U):U=e[44];let N;e[45]!==y?(N=t.jsxs(fe,{children:[y,U]}),e[45]=y,e[46]=N):N=e[46];const W=O?.description??"<p>No description provided.</p>";let w;e[47]!==W?(w=t.jsx("div",{className:"mt-4 flex-1 overflow-y-auto p-4 text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:W}}),e[47]=W,e[48]=w):w=e[48];let k;e[49]!==N||e[50]!==w?(k=t.jsxs(xe,{side:"right",className:"flex h-full w-full max-w-lg flex-col",children:[N,w]}),e[49]=N,e[50]=w,e[51]=k):k=e[51];let S;e[52]!==J||e[53]!==k?(S=t.jsx(ue,{open:J,onOpenChange:L,children:k}),e[52]=J,e[53]=k,e[54]=S):S=e[54];let A;return e[55]!==u||e[56]!==j||e[57]!==S?(A=t.jsxs(he,{breadcrumbs:ke,children:[E,u,j,S]}),e[55]=u,e[56]=j,e[57]=S,e[58]=A):A=e[58],A}function _e(e){return!!e}function Ce(e){return e.url}function De(e,i){return t.jsxs("div",{className:"space-y-3 rounded-xl border border-sidebar-border/70 p-4 dark:border-sidebar-border",children:[t.jsx("div",{className:"h-36 w-full animate-pulse rounded-lg bg-muted"}),t.jsx("div",{className:"h-4 w-2/3 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-muted"})]},`skeleton-${i}`)}function Fe(e){return Se.format(e)}export{Ue as default};
