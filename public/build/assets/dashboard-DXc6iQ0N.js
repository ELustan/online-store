import{c as Br,r as o,j as t,a as x,H as Lr}from"./app-BbNxNsQY.js";import{H as Or,A as Ur,S as zr,a as Wr,b as Yr,c as Gr,d as Jr}from"./app-layout-Be5m0NhR.js";import{d as Kr}from"./index-CiEIW7uy.js";import{D as Qr,a as Vr,b as Xr,c as Zr,d as es}from"./dialog-CSH1WIsy.js";import{a as ts}from"./app-logo-icon-C5cjEc3_.js";/* empty css            */import"./index-DBnW4QuW.js";import"./index-ZgwXp1IE.js";const rs=[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]],ss=ts("ShoppingBasket",rs),as=[{title:"Dashboard",href:Kr().url}],ls=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function Ds(){const e=Br.c(262);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0];const[m,Pr]=o.useState(i),[Be,Yt]=o.useState(!0),[Ue,pr]=o.useState(null),[f,Gt]=o.useState(1),[M]=o.useState(10),[p,$r]=o.useState(1),[$,Er]=o.useState(0);let ze;e[1]===Symbol.for("react.memo_cache_sentinel")?(ze={from:null,to:null},e[1]=ze):ze=e[1];const[R,Dr]=o.useState(ze);let We;e[2]===Symbol.for("react.memo_cache_sentinel")?(We={},e[2]=We):We=e[2];const[c,Ye]=o.useState(We);let Ge;e[3]===Symbol.for("react.memo_cache_sentinel")?(Ge={productId:null,status:"idle"},e[3]=Ge):Ge=e[3];const[b,Je]=o.useState(Ge);let Ke;e[4]===Symbol.for("react.memo_cache_sentinel")?(Ke=new Set,e[4]=Ke):Ke=e[4];const[E,Jt]=o.useState(Ke),[Kt,gr]=o.useState(null),[D,yr]=o.useState(null),I=o.useRef(null);let Qe;e[5]===Symbol.for("react.memo_cache_sentinel")?(Qe={},e[5]=Qe):Qe=e[5];const[Qt,Ar]=o.useState(Qe),[y,jr]=o.useState(null),[Vt,vr]=o.useState(null),[Xt,Nr]=o.useState(null),[Ve,kr]=o.useState(!1),Le=o.useRef(null);let Xe;e[6]===Symbol.for("react.memo_cache_sentinel")?(Xe={search:"",category:"",min_price:"",max_price:""},e[6]=Xe):Xe=e[6];const[s,Oe]=o.useState(Xe),[j,wr]=o.useState(null),[h,_r]=o.useState("stripe");let Ze;e[7]!==f||e[8]!==s.category||e[9]!==s.max_price||e[10]!==s.min_price||e[11]!==s.search||e[12]!==M?(Ze=()=>{const a=new AbortController;return Yt(!0),pr(null),x.get("/api/products",{signal:a.signal,params:{page:f,per_page:M,...s.search?{search:s.search}:{},...s.category?{category:s.category}:{},...s.min_price?{min_price:s.min_price}:{},...s.max_price?{max_price:s.max_price}:{}}}).then(l=>{const d=l.data.products;Pr(d.data),$r(d.last_page),Er(d.total),Dr({from:d.from,to:d.to}),Yt(!1)}).catch(l=>{x.isCancel(l)||(console.error("Error fetching data:",l),pr("Unable to load products right now."),Yt(!1))}),()=>a.abort()},e[7]=f,e[8]=s.category,e[9]=s.max_price,e[10]=s.min_price,e[11]=s.search,e[12]=M,e[13]=Ze):Ze=e[13];let et;e[14]!==f||e[15]!==s||e[16]!==M?(et=[f,M,s],e[14]=f,e[15]=s,e[16]=M,e[17]=et):et=e[17],o.useEffect(Ze,et);let tt,rt;e[18]===Symbol.for("react.memo_cache_sentinel")?(rt=()=>{const a=new AbortController;return x.get("/api/favorites",{signal:a.signal}).then(l=>{const d=(l.data.favorites??[]).map(ks);Jt(new Set(d))}).catch(Ns),()=>a.abort()},tt=[],e[18]=tt,e[19]=rt):(tt=e[18],rt=e[19]),o.useEffect(rt,tt);let st,at;e[20]===Symbol.for("react.memo_cache_sentinel")?(st=()=>{const a=new AbortController;return x.get("/api/cart",{signal:a.signal}).then(l=>{Ye(l.data.items??{}),kr(!0)}).catch(l=>{x.isCancel(l)||(console.error("Error fetching cart:",l),kr(!0))}),()=>a.abort()},at=[],e[20]=st,e[21]=at):(st=e[20],at=e[21]),o.useEffect(st,at);let lt,ot;e[22]===Symbol.for("react.memo_cache_sentinel")?(lt=()=>{const a=new AbortController;return x.get("/api/wallet",{signal:a.signal}).then(l=>{wr(l.data.balance??0)}).catch(vs),()=>a.abort()},ot=[],e[22]=lt,e[23]=ot):(lt=e[22],ot=e[23]),o.useEffect(lt,ot);let nt,dt;e[24]===Symbol.for("react.memo_cache_sentinel")?(nt=()=>()=>{I.current&&clearTimeout(I.current)},dt=[],e[24]=nt,e[25]=dt):(nt=e[24],dt=e[25]),o.useEffect(nt,dt);let it,ct;e[26]!==c||e[27]!==Ve?(it=()=>{if(Ve)return Le.current&&clearTimeout(Le.current),Le.current=setTimeout(()=>{const a=Object.entries(c).map(js);x.post("/api/cart",{items:a}).catch(ys)},400),()=>{Le.current&&clearTimeout(Le.current)}},ct=[c,Ve],e[26]=c,e[27]=Ve,e[28]=it,e[29]=ct):(it=e[28],ct=e[29]),o.useEffect(it,ct);let mt;e[30]===Symbol.for("react.memo_cache_sentinel")?(mt=()=>{Gt(1)},e[30]=mt):mt=e[30];let bt;e[31]!==s?(bt=[s],e[31]=s,e[32]=bt):bt=e[32],o.useEffect(mt,bt);const g=gs,Fr=ps;let ut;e[33]===Symbol.for("react.memo_cache_sentinel")?(ut=a=>{Ye(l=>({...l,[a]:(l[a]??0)+1})),vr(a),setTimeout(()=>vr(null),500)},e[33]=ut):ut=e[33];const Sr=ut;let ft;e[34]===Symbol.for("react.memo_cache_sentinel")?(ft=a=>{Ye(l=>{const d={...l};return d[a]?d[a]===1?(delete d[a],d):(d[a]=d[a]-1,d):d})},e[34]=ft):ft=e[34];const Mr=ft;let xt;e[35]!==c||e[36]!==h?(xt=async()=>{const a=Object.entries(c).map(hs);if(a.length===0){Je({productId:null,status:"error",message:"Your cart is empty."});return}Je({productId:null,status:"loading"});try{const l=await x.post("/api/checkout",{items:a,payment_method:h});if(l.data.checkout_url){window.location.href=l.data.checkout_url;return}Je({productId:null,status:"success",message:`Payment session ${l.data.payment_reference} created.`}),Ye({}),await x.delete("/api/cart"),typeof l.data.wallet_balance=="number"&&wr(l.data.wallet_balance)}catch(l){const d=l;console.error("Checkout failed:",d),Je({productId:null,status:"error",message:d?.response?.data?.message??"Payment setup failed. Try again."})}},e[35]=c,e[36]=h,e[37]=xt):xt=e[37];const Zt=xt;let q,A,u,H,B,L,v,O,U,z,W,N,k,w,Y,G,J,_,K,S,C,T,Q,P;if(e[38]!==c||e[39]!==Vt||e[40]!==b.status||e[41]!==f||e[42]!==Ue||e[43]!==Kt||e[44]!==D||e[45]!==E||e[46]!==s.category||e[47]!==s.max_price||e[48]!==s.min_price||e[49]!==s.search||e[50]!==p||e[51]!==Be||e[52]!==h||e[53]!==m||e[54]!==R||e[55]!==Qt||e[56]!==$||e[57]!==j){const a=(r,n)=>{yr({message:r,tone:n}),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{yr(null),I.current=null},2200)};let l;e[82]===Symbol.for("react.memo_cache_sentinel")?(l=(r,n)=>{const F=n.images?.find(qe=>qe.url===r);jr({url:r,caption:F?.caption??null,name:n.name})},e[82]=l):l=e[82];const d=l,Rr=async r=>{const n=new Set(E),F=n.has(r);n[F?"delete":"add"](r),Jt(n),gr(r),setTimeout(()=>gr(null),400);try{F?(await x.delete(`/api/favorites/${r}`),a("Removed from favorites.","success")):(await x.post("/api/favorites",{product_id:r}),a("Added to favorites.","success"))}catch(qe){console.error("Favorite update failed:",qe);const He=new Set(E);Jt(He),a("Unable to update favorites.","error")}};let jt;e[83]!==c?(jt=r=>c[r.id],e[83]=c,e[84]=jt):jt=e[84];let vt;e[85]!==c?(vt=r=>({...r,quantity:c[r.id],lineTotal:r.final_price*c[r.id],lineCashback:r.cashback_amount*c[r.id]}),e[85]=c,e[86]=vt):vt=e[86],u=m.filter(jt).map(vt);let Nt;if(e[87]!==m){const r=new Set;m.forEach(n=>{n.category&&r.add(n.category)}),Nt=Array.from(r).sort(),e[87]=m,e[88]=Nt}else Nt=e[88];const dr=Nt,Cr=u.reduce(xs,0),Ir=u.reduce(fs,0);A=j!==null&&j>=Cr&&u.length>0,q=Ur,Q=as,e[89]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(Lr,{title:"Dashboard"}),e[89]=P):P=e[89],K="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",e[90]!==D?(S=D?t.jsx("div",{className:"pointer-events-none fixed right-6 top-6 z-50",children:t.jsx("div",{className:`rounded-lg border px-4 py-2 text-sm shadow-lg ${D.tone==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"}`,children:D.message})}):null,e[90]=D,e[91]=S):S=e[91];let kt,wt;e[92]===Symbol.for("react.memo_cache_sentinel")?(kt=t.jsx("div",{className:"absolute -right-16 -top-16 h-40 w-40 rounded-full bg-emerald-200/40 blur-3xl dark:bg-emerald-400/20"}),wt=t.jsx("div",{className:"absolute -left-10 bottom-0 h-36 w-36 rounded-full bg-sky-200/30 blur-3xl dark:bg-sky-400/20"}),e[92]=kt,e[93]=wt):(kt=e[92],wt=e[93]);let _t;e[94]===Symbol.for("react.memo_cache_sentinel")?(_t=t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-widest text-muted-foreground",children:"Online Store"}),t.jsx("h1",{className:"mt-2 text-2xl font-semibold text-foreground",children:"Secure payments, instant savings"}),t.jsx("p",{className:"mt-1 max-w-xl text-sm text-muted-foreground",children:"Shop curated products with transparent pricing, active promos, and automatic cashback."})]}),e[94]=_t):_t=e[94];let St;e[95]===Symbol.for("react.memo_cache_sentinel")?(St=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Products"}),e[95]=St):St=e[95];let ge;e[96]!==$?(ge=t.jsxs("div",{className:"min-w-[140px] rounded-lg border border-sidebar-border/60 bg-background/80 px-4 py-3 shadow-sm dark:border-sidebar-border",children:[St,t.jsx("p",{className:"text-lg font-semibold",children:$})]}),e[96]=$,e[97]=ge):ge=e[97];let Ct;e[98]===Symbol.for("react.memo_cache_sentinel")?(Ct=t.jsxs("div",{className:"min-w-[140px] rounded-lg border border-sidebar-border/60 bg-background/80 px-4 py-3 shadow-sm dark:border-sidebar-border",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure checkout"}),t.jsx("p",{className:"text-lg font-semibold",children:"Enabled"})]}),e[98]=Ct):Ct=e[98];let Tt;e[99]===Symbol.for("react.memo_cache_sentinel")?(Tt=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Promos today"}),e[99]=Tt):Tt=e[99];let ye;e[100]!==m?(ye=m.filter(us),e[100]=m,e[101]=ye):ye=e[101];let je;e[102]!==ye.length?(je=t.jsxs("div",{className:"min-w-[140px] rounded-lg border border-sidebar-border/60 bg-background/80 px-4 py-3 shadow-sm dark:border-sidebar-border",children:[Tt,t.jsx("p",{className:"text-lg font-semibold",children:ye.length})]}),e[102]=ye.length,e[103]=je):je=e[103],e[104]!==ge||e[105]!==je?(C=t.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-sidebar-border/70 bg-gradient-to-br from-muted/40 via-background to-muted/30 p-6 dark:border-sidebar-border",children:[kt,wt,t.jsxs("div",{className:"relative flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[_t,t.jsxs("div",{className:"flex flex-wrap gap-3",children:[ge,Ct,je]})]})]}),e[104]=ge,e[105]=je,e[106]=C):C=e[106];let Pt;e[107]===Symbol.for("react.memo_cache_sentinel")?(Pt=t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Filter products"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Search, category, or price range to refine the list."})]}),e[107]=Pt):Pt=e[107];let $t;e[108]===Symbol.for("react.memo_cache_sentinel")?($t=t.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[Pt,t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-1 text-xs font-semibold dark:border-sidebar-border",onClick:()=>Oe({search:"",category:"",min_price:"",max_price:""}),type:"button",children:"Clear filters"})]}),e[108]=$t):$t=e[108];let Et;e[109]===Symbol.for("react.memo_cache_sentinel")?(Et=r=>Oe(n=>({...n,search:r.target.value})),e[109]=Et):Et=e[109];let ve;e[110]!==s.search?(ve=t.jsx("input",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",placeholder:"Search products",value:s.search,onChange:Et}),e[110]=s.search,e[111]=ve):ve=e[111];const qr=s.category;let Dt,At;e[112]===Symbol.for("react.memo_cache_sentinel")?(Dt=r=>Oe(n=>({...n,category:r.target.value})),At=t.jsx("option",{value:"",children:"All categories"}),e[112]=Dt,e[113]=At):(Dt=e[112],At=e[113]);let Ne;e[114]!==dr?(Ne=dr.map(bs),e[114]=dr,e[115]=Ne):Ne=e[115];let ke;e[116]!==s.category||e[117]!==Ne?(ke=t.jsxs("select",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",value:qr,onChange:Dt,children:[At,Ne]}),e[116]=s.category,e[117]=Ne,e[118]=ke):ke=e[118];let Ft;e[119]===Symbol.for("react.memo_cache_sentinel")?(Ft=r=>Oe(n=>({...n,min_price:r.target.value})),e[119]=Ft):Ft=e[119];let we;e[120]!==s.min_price?(we=t.jsx("input",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",placeholder:"Min price",value:s.min_price,onChange:Ft,type:"number",min:"0"}),e[120]=s.min_price,e[121]=we):we=e[121];let Mt;e[122]===Symbol.for("react.memo_cache_sentinel")?(Mt=r=>Oe(n=>({...n,max_price:r.target.value})),e[122]=Mt):Mt=e[122];let _e;e[123]!==s.max_price?(_e=t.jsx("input",{className:"rounded-md border border-sidebar-border/70 bg-background px-3 py-2 text-xs dark:border-sidebar-border",placeholder:"Max price",value:s.max_price,onChange:Mt,type:"number",min:"0"}),e[123]=s.max_price,e[124]=_e):_e=e[124],e[125]!==ve||e[126]!==ke||e[127]!==we||e[128]!==_e?(T=t.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-4 dark:border-sidebar-border",children:[$t,t.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[ve,ke,we,_e]})]}),e[125]=ve,e[126]=ke,e[127]=we,e[128]=_e,e[129]=T):T=e[129],J="grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]";let Rt;e[130]===Symbol.for("react.memo_cache_sentinel")?(Rt=t.jsx("h2",{className:"text-lg font-semibold",children:"Products"}),e[130]=Rt):Rt=e[130];const ir=$>0&&R.from!==null&&R.to!==null?`Showing ${R.from}-${R.to} of ${$}`:"No products found";let Se;e[131]!==ir?(Se=t.jsxs("div",{children:[Rt,t.jsx("p",{className:"text-sm text-muted-foreground",children:ir})]}),e[131]=ir,e[132]=Se):Se=e[132];let It;e[133]===Symbol.for("react.memo_cache_sentinel")?(It=()=>Gt(ms),e[133]=It):It=e[133];const cr=Be||f===1;let Ce;e[134]!==cr?(Ce=t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-1 text-sm disabled:cursor-not-allowed disabled:opacity-50 dark:border-sidebar-border",onClick:It,disabled:cr,type:"button",children:"Prev"}),e[134]=cr,e[135]=Ce):Ce=e[135];let Te;e[136]!==f||e[137]!==p?(Te=t.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",f," of ",p]}),e[136]=f,e[137]=p,e[138]=Te):Te=e[138];let Pe;e[139]!==p?(Pe=()=>Gt(r=>Math.min(p,r+1)),e[139]=p,e[140]=Pe):Pe=e[140];const mr=Be||f===p;let $e;e[141]!==Pe||e[142]!==mr?($e=t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-3 py-1 text-sm disabled:cursor-not-allowed disabled:opacity-50 dark:border-sidebar-border",onClick:Pe,disabled:mr,type:"button",children:"Next"}),e[141]=Pe,e[142]=mr,e[143]=$e):$e=e[143];let Ee;e[144]!==Ce||e[145]!==Te||e[146]!==$e?(Ee=t.jsxs("div",{className:"flex items-center gap-2",children:[Ce,Te,$e]}),e[144]=Ce,e[145]=Te,e[146]=$e,e[147]=Ee):Ee=e[147];let De;e[148]!==Se||e[149]!==Ee?(De=t.jsxs("div",{className:"flex flex-col gap-3 border-b border-sidebar-border/70 px-4 py-4 md:flex-row md:items-center md:justify-between dark:border-sidebar-border",children:[Se,Ee]}),e[148]=Se,e[149]=Ee,e[150]=De):De=e[150];const br=Ue?t.jsx("div",{className:"px-4 py-6 text-sm text-red-600 dark:text-red-400",children:Ue}):t.jsx("div",{className:"grid gap-4 p-4 md:grid-cols-2 xl:grid-cols-3",children:Be?Array.from({length:6}).map(cs):m.map(r=>{const n=Fr(r.promo_expires_at),F=r.discount_percent>0,qe=r.cashback_percent>0,Wt=[r.image,...(r.images??[]).map(is)].filter(ds),He=Qt[r.id]??Wt[0]??null;return t.jsxs("div",{className:"flex h-full flex-col rounded-xl border border-sidebar-border/70 bg-background p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md dark:border-sidebar-border",children:[t.jsx("div",{className:"relative h-36 overflow-hidden rounded-lg border border-sidebar-border/50 bg-muted/40 dark:border-sidebar-border",children:He?t.jsx("button",{className:"h-full w-full",onClick:()=>d(He,r),type:"button",children:t.jsx("img",{src:He,alt:r.name,className:"h-full w-full object-cover",loading:"lazy"})}):t.jsx("div",{className:"flex h-full items-center justify-center text-xs text-muted-foreground",children:"No image"})}),Wt.length>1?t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Wt.map((hr,Tr)=>t.jsx("button",{className:`h-10 w-10 overflow-hidden rounded-md border ${He===hr?"border-foreground":"border-sidebar-border/70"}`,onClick:()=>Ar(Hr=>({...Hr,[r.id]:hr})),type:"button",children:t.jsx("img",{src:hr,alt:`${r.name} preview ${Tr+1}`,className:"h-full w-full object-cover",loading:"lazy"})},`${r.id}-preview-${Tr}`))}):null,t.jsxs("div",{className:"mt-4 flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:r.category??"Unassigned"}),t.jsx("h3",{className:"text-lg font-semibold",children:r.name})]}),r.promo_active&&t.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-1 text-xs font-semibold text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-500/10 dark:text-emerald-200",children:r.promo_label??"Promo"})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[F&&t.jsxs("span",{className:"rounded-full border border-amber-200 bg-amber-50 px-2 py-1 text-amber-700 dark:border-amber-400/40 dark:bg-amber-500/10 dark:text-amber-200",children:[r.discount_percent,"% off"]}),qe&&t.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-2 py-1 text-sky-700 dark:border-sky-400/40 dark:bg-sky-500/10 dark:text-sky-200",children:[r.cashback_percent,"% cashback"]}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.rating_average!==null&&r.rating_average!==void 0?`${r.rating_average.toFixed(1)} / 5`:"No ratings",r.reviews_count?` (${r.reviews_count})`:""]}),n&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ends ",n]})]}),t.jsx("div",{className:"mt-3 max-h-12 overflow-hidden text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:r.description??"<p>No description provided.</p>"}}),r.description?t.jsx("button",{className:"mt-2 text-xs font-semibold text-foreground/70",onClick:()=>Nr({name:r.name,description:r.description??""}),type:"button",children:"Read full description"}):null,t.jsxs("div",{className:"mt-4 flex items-end justify-between",children:[t.jsxs("div",{children:[F?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg font-semibold",children:g(r.final_price)}),t.jsx("span",{className:"text-xs text-muted-foreground line-through",children:g(r.price)})]}):t.jsx("span",{className:"text-lg font-semibold",children:g(r.price)}),qe&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earn ",g(r.cashback_amount)," cashback"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:`rounded-md border p-2 text-xs font-semibold transition duration-200 dark:border-sidebar-border ${E.has(r.id)?"border-rose-200 bg-rose-50 text-rose-600 dark:border-rose-400/40 dark:bg-rose-500/10 dark:text-rose-200":"border-sidebar-border/70 text-muted-foreground"} ${Kt===r.id?"scale-110 rotate-12 shadow-md":"scale-100"}`,onClick:()=>Rr(r.id),type:"button","aria-label":E.has(r.id)?"Remove from favorites":"Add to favorites",children:t.jsx(Or,{className:`h-4 w-4 ${E.has(r.id)?"fill-current":""}`})}),t.jsxs("button",{className:"relative rounded-md bg-foreground px-3 py-2 text-xs font-semibold text-background transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>Sr(r.id),disabled:b.status==="loading",type:"button",children:["Add to cart",Vt===r.id?t.jsx("span",{className:"absolute -right-3 -top-3 inline-flex h-6 w-6 items-center justify-center rounded-full bg-amber-100 text-amber-700 shadow-sm animate-bounce",children:t.jsx(ss,{className:"h-3 w-3"})}):null]})]})]}),r.reviews?.length?t.jsxs("div",{className:"mt-4 rounded-lg border border-sidebar-border/60 bg-muted/30 p-3 text-xs text-muted-foreground dark:border-sidebar-border",children:[t.jsx("div",{className:"text-xs font-semibold uppercase text-muted-foreground",children:"Recent reviews"}),t.jsx("div",{className:"mt-2 space-y-2",children:r.reviews.map(ns)})]}):null]},r.id)})});e[151]!==De||e[152]!==br?(_=t.jsxs("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[De,br]}),e[151]=De,e[152]=br,e[153]=_):_=e[153],Y="lg:sticky lg:top-6 lg:self-start";let qt;e[154]===Symbol.for("react.memo_cache_sentinel")?(qt=t.jsx("h2",{className:"text-lg font-semibold",children:"Shopping list"}),e[154]=qt):qt=e[154];const ur=u.length?"Items ready for checkout":"Your cart is empty";let Ht;e[155]!==ur?(Ht=t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[qt,t.jsx("p",{className:"text-sm text-muted-foreground",children:ur})]})}),e[155]=ur,e[156]=Ht):Ht=e[156],G=t.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-background p-4 dark:border-sidebar-border",children:[Ht,t.jsx("div",{className:"mt-4 space-y-3",children:u.length?u.map(r=>t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-sidebar-border/60 p-3 dark:border-sidebar-border",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold",children:r.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[g(r.final_price)," each"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-2 py-1 text-xs dark:border-sidebar-border",onClick:()=>Mr(r.id),type:"button",children:"-"}),t.jsx("span",{className:"text-sm font-semibold",children:r.quantity}),t.jsx("button",{className:"rounded-md border border-sidebar-border/70 px-2 py-1 text-xs dark:border-sidebar-border",onClick:()=>Sr(r.id),type:"button",children:"+"})]}),t.jsx("div",{className:"text-sm font-semibold",children:g(r.lineTotal)})]},`cart-${r.id}`)):t.jsx("div",{className:"rounded-lg border border-dashed border-sidebar-border/60 p-6 text-sm text-muted-foreground dark:border-sidebar-border",children:"Add products to build your shopping list."})})]}),W="mt-4 rounded-xl border border-sidebar-border/70 bg-background p-4 dark:border-sidebar-border",e[157]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("h2",{className:"text-lg font-semibold",children:"Checkout"}),k=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Review totals before paying."}),e[157]=N,e[158]=k):(N=e[157],k=e[158]);let Bt;e[159]===Symbol.for("react.memo_cache_sentinel")?(Bt=t.jsx("span",{children:"Cashback wallet"}),e[159]=Bt):Bt=e[159];let Ae;e[160]!==j?(Ae=j!==null?g(j):"—",e[160]=j,e[161]=Ae):Ae=e[161];let Fe;e[162]!==Ae?(Fe=t.jsxs("div",{className:"flex items-center justify-between",children:[Bt,t.jsx("span",{className:"font-semibold text-foreground",children:Ae})]}),e[162]=Ae,e[163]=Fe):Fe=e[163];const fr=`rounded-md border px-2 py-1 text-xs font-semibold ${h==="stripe"?"border-foreground bg-foreground text-background":"border-sidebar-border/70 text-muted-foreground"}`;let Lt;e[164]===Symbol.for("react.memo_cache_sentinel")?(Lt=()=>_r("stripe"),e[164]=Lt):Lt=e[164];let Me;e[165]!==fr?(Me=t.jsx("button",{className:fr,onClick:Lt,type:"button",children:"Pay by card"}),e[165]=fr,e[166]=Me):Me=e[166];const xr=`rounded-md border px-2 py-1 text-xs font-semibold ${h==="wallet"?"border-foreground bg-foreground text-background":"border-sidebar-border/70 text-muted-foreground"}`;let Ot;e[167]===Symbol.for("react.memo_cache_sentinel")?(Ot=()=>_r("wallet"),e[167]=Ot):Ot=e[167];let Re;e[168]!==xr?(Re=t.jsx("button",{className:xr,onClick:Ot,type:"button",children:"Use cashback"}),e[168]=xr,e[169]=Re):Re=e[169];let Ie;e[170]!==Me||e[171]!==Re?(Ie=t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[Me,Re]}),e[170]=Me,e[171]=Re,e[172]=Ie):Ie=e[172],e[173]!==Fe||e[174]!==Ie?(w=t.jsxs("div",{className:"mt-3 rounded-lg border border-sidebar-border/60 bg-muted/30 p-3 text-xs text-muted-foreground dark:border-sidebar-border",children:[Fe,Ie]}),e[173]=Fe,e[174]=Ie,e[175]=w):w=e[175],O="mt-4 space-y-3 text-sm";let Ut;e[176]===Symbol.for("react.memo_cache_sentinel")?(Ut=t.jsx("span",{className:"text-muted-foreground",children:"Items"}),e[176]=Ut):Ut=e[176],U=t.jsxs("div",{className:"flex items-center justify-between",children:[Ut,t.jsx("span",{children:u.reduce(os,0)})]});let zt;e[177]===Symbol.for("react.memo_cache_sentinel")?(zt=t.jsx("span",{className:"text-muted-foreground",children:"Total"}),e[177]=zt):zt=e[177],z=t.jsxs("div",{className:"flex items-center justify-between",children:[zt,t.jsx("span",{className:"font-semibold",children:g(Cr)})]}),L="flex items-center justify-between",e[178]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("span",{className:"text-muted-foreground",children:"Cashback"}),e[178]=v):v=e[178],H="font-semibold text-emerald-600 dark:text-emerald-300",B=g(Ir),e[38]=c,e[39]=Vt,e[40]=b.status,e[41]=f,e[42]=Ue,e[43]=Kt,e[44]=D,e[45]=E,e[46]=s.category,e[47]=s.max_price,e[48]=s.min_price,e[49]=s.search,e[50]=p,e[51]=Be,e[52]=h,e[53]=m,e[54]=R,e[55]=Qt,e[56]=$,e[57]=j,e[58]=q,e[59]=A,e[60]=u,e[61]=H,e[62]=B,e[63]=L,e[64]=v,e[65]=O,e[66]=U,e[67]=z,e[68]=W,e[69]=N,e[70]=k,e[71]=w,e[72]=Y,e[73]=G,e[74]=J,e[75]=_,e[76]=K,e[77]=S,e[78]=C,e[79]=T,e[80]=Q,e[81]=P}else q=e[58],A=e[59],u=e[60],H=e[61],B=e[62],L=e[63],v=e[64],O=e[65],U=e[66],z=e[67],W=e[68],N=e[69],k=e[70],w=e[71],Y=e[72],G=e[73],J=e[74],_=e[75],K=e[76],S=e[77],C=e[78],T=e[79],Q=e[80],P=e[81];let V;e[179]!==H||e[180]!==B?(V=t.jsx("span",{className:H,children:B}),e[179]=H,e[180]=B,e[181]=V):V=e[181];let X;e[182]!==L||e[183]!==v||e[184]!==V?(X=t.jsxs("div",{className:L,children:[v,V]}),e[182]=L,e[183]=v,e[184]=V,e[185]=X):X=e[185];let Z;e[186]!==O||e[187]!==U||e[188]!==z||e[189]!==X?(Z=t.jsxs("div",{className:O,children:[U,z,X]}),e[186]=O,e[187]=U,e[188]=z,e[189]=X,e[190]=Z):Z=e[190];const er=b.status==="loading"||u.length===0||h==="wallet"&&!A,tr=b.status==="loading"?"Processing...":h==="wallet"?"Pay with cashback":"Checkout with card";let ee;e[191]!==Zt||e[192]!==er||e[193]!==tr?(ee=t.jsx("button",{className:"mt-4 w-full rounded-md bg-foreground px-3 py-2 text-sm font-semibold text-background transition hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",onClick:Zt,disabled:er,type:"button",children:tr}),e[191]=Zt,e[192]=er,e[193]=tr,e[194]=ee):ee=e[194];let te;e[195]!==A||e[196]!==u||e[197]!==h?(te=h==="wallet"&&!A&&u.length>0?t.jsx("p",{className:"mt-2 text-xs text-amber-600 dark:text-amber-300",children:"Cashback balance is insufficient for this order."}):null,e[195]=A,e[196]=u,e[197]=h,e[198]=te):te=e[198];let re;e[199]!==b.message||e[200]!==b.status?(re=b.status!=="idle"&&b.message?t.jsx("p",{className:`mt-3 text-xs ${b.status==="success"?"text-emerald-600 dark:text-emerald-300":b.status==="error"?"text-red-600 dark:text-red-300":"text-muted-foreground"}`,children:b.message}):null,e[199]=b.message,e[200]=b.status,e[201]=re):re=e[201];let se;e[202]!==W||e[203]!==N||e[204]!==k||e[205]!==w||e[206]!==Z||e[207]!==ee||e[208]!==te||e[209]!==re?(se=t.jsxs("div",{className:W,children:[N,k,w,Z,ee,te,re]}),e[202]=W,e[203]=N,e[204]=k,e[205]=w,e[206]=Z,e[207]=ee,e[208]=te,e[209]=re,e[210]=se):se=e[210];let ae;e[211]!==Y||e[212]!==G||e[213]!==se?(ae=t.jsxs("div",{className:Y,children:[G,se]}),e[211]=Y,e[212]=G,e[213]=se,e[214]=ae):ae=e[214];let le;e[215]!==J||e[216]!==_||e[217]!==ae?(le=t.jsxs("div",{className:J,children:[_,ae]}),e[215]=J,e[216]=_,e[217]=ae,e[218]=le):le=e[218];let oe;e[219]!==K||e[220]!==S||e[221]!==C||e[222]!==T||e[223]!==le?(oe=t.jsxs("div",{className:K,children:[S,C,T,le]}),e[219]=K,e[220]=S,e[221]=C,e[222]=T,e[223]=le,e[224]=oe):oe=e[224];const rr=!!y;let ht;e[225]===Symbol.for("react.memo_cache_sentinel")?(ht=a=>a?null:jr(null),e[225]=ht):ht=e[225];const sr=y?.name??"Product image";let ne;e[226]!==sr?(ne=t.jsx(Qr,{children:sr}),e[226]=sr,e[227]=ne):ne=e[227];const ar=y?.caption??"Preview image";let de;e[228]!==ar?(de=t.jsx(Vr,{children:ar}),e[228]=ar,e[229]=de):de=e[229];let ie;e[230]!==ne||e[231]!==de?(ie=t.jsxs(Xr,{children:[ne,de]}),e[230]=ne,e[231]=de,e[232]=ie):ie=e[232];let ce;e[233]!==y?(ce=y?.url?t.jsx("div",{className:"overflow-hidden rounded-lg border border-sidebar-border/70",children:t.jsx("img",{src:y.url,alt:y.name,className:"h-full w-full object-contain"})}):null,e[233]=y,e[234]=ce):ce=e[234];let me;e[235]!==ie||e[236]!==ce?(me=t.jsxs(Zr,{className:"max-w-3xl",children:[ie,ce]}),e[235]=ie,e[236]=ce,e[237]=me):me=e[237];let be;e[238]!==rr||e[239]!==me?(be=t.jsx(es,{open:rr,onOpenChange:ht,children:me}),e[238]=rr,e[239]=me,e[240]=be):be=e[240];const lr=!!Xt;let pt;e[241]===Symbol.for("react.memo_cache_sentinel")?(pt=a=>a?null:Nr(null),e[241]=pt):pt=e[241];const or=Xt?.name??"Description";let ue;e[242]!==or?(ue=t.jsx(zr,{children:or}),e[242]=or,e[243]=ue):ue=e[243];let gt;e[244]===Symbol.for("react.memo_cache_sentinel")?(gt=t.jsx(Wr,{children:"Full product details"}),e[244]=gt):gt=e[244];let fe;e[245]!==ue?(fe=t.jsxs(Yr,{children:[ue,gt]}),e[245]=ue,e[246]=fe):fe=e[246];const nr=Xt?.description??"<p>No description provided.</p>";let xe;e[247]!==nr?(xe=t.jsx("div",{className:"mt-4 flex-1 overflow-y-auto p-4 text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:nr}}),e[247]=nr,e[248]=xe):xe=e[248];let he;e[249]!==fe||e[250]!==xe?(he=t.jsxs(Gr,{side:"right",className:"flex h-full w-full max-w-lg flex-col",children:[fe,xe]}),e[249]=fe,e[250]=xe,e[251]=he):he=e[251];let pe;e[252]!==lr||e[253]!==he?(pe=t.jsx(Jr,{open:lr,onOpenChange:pt,children:he}),e[252]=lr,e[253]=he,e[254]=pe):pe=e[254];let yt;return e[255]!==q||e[256]!==Q||e[257]!==P||e[258]!==oe||e[259]!==be||e[260]!==pe?(yt=t.jsxs(q,{breadcrumbs:Q,children:[P,oe,be,pe]}),e[255]=q,e[256]=Q,e[257]=P,e[258]=oe,e[259]=be,e[260]=pe,e[261]=yt):yt=e[261],yt}function os(e,i){return e+i.quantity}function ns(e){return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-foreground",children:e.reviewer}),t.jsx("span",{children:"★".repeat(e.rating)})]}),t.jsx("p",{className:"text-xs",children:e.comment})]},e.id)}function ds(e){return!!e}function is(e){return e.url}function cs(e,i){return t.jsxs("div",{className:"space-y-3 rounded-xl border border-sidebar-border/70 p-4 dark:border-sidebar-border",children:[t.jsx("div",{className:"h-36 w-full animate-pulse rounded-lg bg-muted"}),t.jsx("div",{className:"h-4 w-2/3 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"h-4 w-1/2 animate-pulse rounded bg-muted"}),t.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-muted"})]},`skeleton-${i}`)}function ms(e){return Math.max(1,e-1)}function bs(e){return t.jsx("option",{value:e,children:e},e)}function us(e){return e.promo_active}function fs(e,i){return e+i.lineCashback}function xs(e,i){return e+i.lineTotal}function hs(e){const[i,m]=e;return{product_id:Number(i),quantity:m}}function ps(e){if(!e)return null;const i=new Date(e);return Number.isNaN(i.getTime())?null:i.toLocaleDateString()}function gs(e){return ls.format(e)}function ys(e){console.error("Error saving cart:",e)}function js(e){const[i,m]=e;return{product_id:Number(i),quantity:m}}function vs(e){x.isCancel(e)||console.error("Error fetching wallet:",e)}function Ns(e){x.isCancel(e)||console.error("Error fetching favorites:",e)}function ks(e){return e.id}export{Ds as default};
